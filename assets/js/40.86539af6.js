(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{451:function(n,s,a){"use strict";a.r(s);var t=a(10),e=Object(t.a)({},(function(){var n=this,s=n._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h1",{attrs:{id:"九-nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#九-nginx"}},[n._v("#")]),n._v(" 九.Nginx")]),n._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[n._v("前言")]),n._v(" "),s("p",[n._v("配置 nginx docker,挂载目录放到docker外部，方便修改配置与存放资源以及查看日志")])]),n._v(" "),s("h2",{attrs:{id:"_1-获取镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-获取镜像"}},[n._v("#")]),n._v(" 1.获取镜像")]),n._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" pull nginx\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br")])]),s("h2",{attrs:{id:"_2-拷贝配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-拷贝配置"}},[n._v("#")]),n._v(" 2.拷贝配置")]),n._v(" "),s("ul",[s("li",[n._v("启动 nginx 容器")])]),n._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("--name")]),n._v(" nginx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("-p")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("90")]),n._v(":80 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("-d")]),n._v(" nginx\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br")])]),s("ul",[s("li",[n._v("创建挂载目录"),s("code",[n._v("xxx")])])]),n._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[n._v("mkdir")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("-p")]),n._v(" /xxx/nginx/conf\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("mkdir")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("-p")]),n._v(" /xxx/nginx/log\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("mkdir")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("-p")]),n._v(" /xxx/nginx/html\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br")])]),s("ul",[s("li",[n._v("修改配置文件为本地")])]),n._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("cp")]),n._v(" nginx:/etc/nginx/nginx.conf /xxx/nginx/conf/nginx.conf\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("cp")]),n._v(" nginx:/etc/nginx/conf.d /xxx/nginx/conf/conf.d\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("cp")]),n._v(" nginx:/usr/share/nginx/html /xxx/nginx/\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br")])]),s("ul",[s("li",[n._v("删除容器")])]),n._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 找到nginx对应的容器id")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("ps")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("-a")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 关闭该容器")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" stop nginx\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 删除该容器")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("rm")]),n._v(" nginx\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br")])]),s("h2",{attrs:{id:"_3-配置-nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置-nginx"}},[n._v("#")]),n._v(" 3.配置 nginx")]),n._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[n._v("    server "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n        listen       "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        server_name  "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("81.71")]),n._v(".127.69"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        location ~*^.+$ "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n            root   /usr/src/zhoubichuan/prod"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n            try_files "),s("span",{pre:!0,attrs:{class:"token variable"}},[n._v("$uri")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[n._v("$uri")]),n._v("/ /index.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n            index  index.html index.htm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br")])]),s("h2",{attrs:{id:"_4-启动镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-启动镜像"}},[n._v("#")]),n._v(" 4.启动镜像")]),n._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" run "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("-p")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("80")]),n._v(":80 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("--name")]),n._v(" nginx "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("--network")]),n._v(" dockerbetweennetwork "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("-v")]),n._v(" /xxx/nginx/conf/nginx.conf:/etc/nginx/nginx.conf "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("-v")]),n._v(" /xxx/nginx/conf/conf.d:/etc/nginx.conf.d "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("-v")]),n._v(" /xxx/nginx/log:/var/log/nginx "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("-v")]),n._v(" /xxx/nginx/html:/usr/share/nginx/html "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("-d")]),n._v(" nginx:latest\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br")])]),s("table",[s("thead",[s("tr",[s("th",[n._v("命令")]),n._v(" "),s("th",[n._v("描述")])])]),n._v(" "),s("tbody",[s("tr",[s("td",[n._v("–name nginx")]),n._v(" "),s("td",[n._v("启动容器的名字")])]),n._v(" "),s("tr",[s("td",[n._v("-d")]),n._v(" "),s("td",[n._v("后台运行")])]),n._v(" "),s("tr",[s("td",[n._v("--network dockerbetweennetwork")]),n._v(" "),s("td",[n._v("桥接网络")])]),n._v(" "),s("tr",[s("td",[n._v("-p 80:80")]),n._v(" "),s("td",[n._v("将容器的 80(后面那个) 端口映射到主机的 80(前面那个) 端口")])]),n._v(" "),s("tr",[s("td",[n._v("-v /xxx/nginx/conf/nginx.conf:/etc/nginx/nginx.conf")]),n._v(" "),s("td",[n._v("挂载 nginx.conf 配置文件")])]),n._v(" "),s("tr",[s("td",[n._v("-v /xxx/nginx/conf/conf.d:/etc/nginx.conf.d")]),n._v(" "),s("td",[n._v("挂载 nginx 配置文件")])]),n._v(" "),s("tr",[s("td",[n._v("-v /xxx/nginx/log:/var/log/nginx")]),n._v(" "),s("td",[n._v("挂载 nginx 日志文件")])]),n._v(" "),s("tr",[s("td",[n._v("-v /xxx/nginx/html:/usr/share/nginx/html")]),n._v(" "),s("td",[n._v("挂载 nginx 内容")])]),n._v(" "),s("tr",[s("td",[n._v("nginx:latest")]),n._v(" "),s("td",[n._v("本地运行的版本")])]),n._v(" "),s("tr",[s("td",[n._v("\\")]),n._v(" "),s("td",[n._v("shell 命令换行")])])])]),n._v(" "),s("h2",{attrs:{id:"_5-dockerfile"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-dockerfile"}},[n._v("#")]),n._v(" 5.Dockerfile")])])}),[],!1,null,null,null);s.default=e.exports}}]);